# üõç –ú–∞–≥–∞–∑–∏–Ω –º–µ—Ä—á–∞ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

![License: MIT](https://img.shields.io/badge/License-MIT-red.svg)

## üìù –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ú–∞–≥–∞–∑–∏–Ω –º–µ—Ä—á–∞ ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –∫–æ–º–ø–∞–Ω–∏–∏ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –º–æ–Ω–µ—Ç–∞–º–∏ –∏ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—Ç—å –Ω–∞ –Ω–∏—Ö –º–µ—Ä—á.
–ö–∞–∂–¥—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –º–æ–∂–µ—Ç:

- –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ –∏ –ø–æ–ª—É—á–∏—Ç—å 1000 –ø–æ–¥–∞—Ä–æ—á–Ω—ã—Ö –º–æ–Ω–µ—Ç.
- –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –º–æ–Ω–µ—Ç, –≤–∫–ª—é—á–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –∫—Ç–æ –∏ –≤ –∫–∞–∫–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª –º–æ–Ω–µ—Ç—ã.
- –°–æ–≤–µ—Ä—à–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –º–æ–Ω–µ—Ç –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
- –ü–æ–∫—É–ø–∞—Ç—å –º–µ—Ä—á –∑–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç—ã.

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Golang** 1.23
- **Gin** (–≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
- **sqlx** (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å SQL)
- **Goose** (–º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
- **PostgreSQL** 17.4
- **Docker Compose** (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏)

## üì° API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∞–ª–∞–Ω—Å–µ

**GET** `/api/info`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –±–∞–ª–∞–Ω—Å–µ –º–æ–Ω–µ—Ç, –∫—É–ø–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```sh
curl -H "Authorization: Bearer <TOKEN>" -X GET http://localhost:8080/api/info
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ `200 OK`**

```json
{
  "coins": 1000,
  "inventory": [
    {
      "type": "powerbank",
      "quantity": 1
    }
  ],
  "coinHistory": {
    "received": [
      {
        "fromUser": "john_doe",
        "amount": 50
      }
    ],
    "sent": [
      {
        "toUser": "jane_doe",
        "amount": 30
      }
    ]
  }
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–æ–π (400, 401, 500):**

```json
{
  "errors": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

### 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –º–æ–Ω–µ—Ç

**POST** `/api/sendCoin`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–æ–Ω–µ—Ç—ã –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```sh
curl -H "Authorization: Bearer <TOKEN>" \
     -H "Content-Type: application/json" \
     -X POST http://localhost:8080/api/sendCoin \
     -d '{
       "toUser": "john_doe",
       "amount": 50
     }'
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ `200 OK`**

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–æ–π (400, 401, 500):**

```json
{
  "errors": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

### 3. –ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞

**GET** `/api/buy/{item}`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫—É–ø–∏—Ç—å —Ç–æ–≤–∞—Ä –∑–∞ –º–æ–Ω–µ—Ç—ã.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```sh
curl -H "Authorization: Bearer <TOKEN>" -X GET http://localhost:8080/api/buy/powerbank
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ `200 OK`**

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–æ–π (400, 401, 500):**

```json
{
  "errors": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

### 4. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**POST** `/api/auth`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∑–≤–æ–ª—è–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∏—Ç—å JWT-—Ç–æ–∫–µ–Ω.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```sh
curl -H "Content-Type: application/json" \
     -X POST http://localhost:8080/api/auth \
     -d '{
       "username": "user",
       "password": "pass"
     }'
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ `200 OK`**

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–æ–π (400, 401, 500):**

```json
{
  "errors": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```sh
 git clone <URL_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø>
```

### –°–æ–∑–¥–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env`

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```sh
DB_CONTAINER_NAME=
DB_USER=
DB_PASS=
DB_NAME=
DB_HOST=
DB_PORT=
DATABASE_URL=
DATABASE_URL_CONTAINER=
APP_CONTAINER_NAME=
JWT_SECRET=
```

### –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker Compose

- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose: [üîó –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç](https://docs.docker.com/compose/install/)

### ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

```sh
docker compose up -d  # –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
```

–∏–ª–∏

```sh
docker compose up  # –ó–∞–ø—É—Å–∫ —Å –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```sh
go test ./...
```

### –ó–∞–ø—É—Å–∫ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏

```sh
go test -coverprofile=coverage.out ./... && go tool cover -func=coverage.out | grep total
```

> **–ü–æ–∫—Ä—ã—Ç–∏–µ > 40%**:
> ![coverage](https://github.com/jamsi-max/merch-store/blob/main/screenshots/coverage.png)

### –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞ (golangci-lint)

- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞: [üîó –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç](https://golangci-lint.run/welcome/install/)

```sh
golangci-lint run
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–∏–ª–æ—Å—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **k6**.

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç k6

- k6 ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞: [üîó –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç](https://k6.io/docs/get-started/installation/)

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è

–ù–∞–∏–±–æ–ª—å—à–∏–º –≤—ã–∑–æ–≤–æ–º –≤ –ø—Ä–æ–µ–∫—Ç–µ —Å—Ç–∞–ª–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏: **1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É (RPS) –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ (SLI) –Ω–µ –±–æ–ª–µ–µ 50 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥**. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω–æ–º–∞—Å—à—Ç–∞–±–Ω–æ–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –¥–æ–º–∞—à–Ω–µ–º –Ω–æ—É—Ç–±—É–∫–µ –Ω–µ —Å–º–æ–≥ —Ç–∞–∫, –∫–∞–∫ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏–ª—å–Ω–æ –ø—Ä—ã–≥–∞–ª–∏ –ø—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö.
–¢–∞–∫ –∂–µ —É—á–∏—Ç—ã–≤–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –ø—Ä–æ–µ–∫—Ç–µ, –Ω–µ —É—Å–ø–µ–ª –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏. –í –ø–ª–∞–Ω–∞—Ö –±—ã–ª–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Redis –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–ø–∏—Å—å—é –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –•–æ—Ç—è –∏–¥–µ–π –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—ã–ª–æ –º–Ω–æ–≥–æ, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ –Ω–∞ –≤—Å—ë.

–ï—â—ë –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏—à–ª–æ—Å—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫—Ä–∞–µ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ —è–≤–Ω–æ –æ–ø–∏—Å–∞–Ω—ã –≤ —É—Å–ª–æ–≤–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä:

- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö HTTP-–º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –º–æ–Ω–µ—Ç
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞–º–∏. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Ç—É–∞—Ü–∏–π —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î–µ–π—Å—Ç–≤–∏—è —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥—Ä.

–í—Å–µ —ç—Ç–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª, –Ω–æ –Ω–µ —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
